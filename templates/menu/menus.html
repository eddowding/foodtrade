{% extends 'menu_base.html' %}
{% load staticfiles %} 
{% load socialaccount %}
{% load url from future %}
{% load i18n %}
{% load account %}


{% block extra_style %}

<link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">

    
<style>
    body.dragging, body.dragging * {
        cursor: move !important;
      }

.dragged {
  position: absolute;
  opacity: 0.5;
  z-index: 2000;
}

ul.todo-list li.placeholder {
  position: relative;
  /** More li styles **/
}
ul.todo-list li.placeholder:before {
  position: absolute;
  /** Define arrowhead **/
}


    .ui-autocomplete .ui-menu-item a
{
    min-height: 15px;
}
    .ui-autocomplete {
        z-index: 100;
        }


</style>
    
{% endblock %}

{% block extra_js %}
    <script src="{% static "menu/js/plugins/sortable/jquery-sortable-min.js" %}" type="text/javascript"></script>
    <script src="{% static "menu/js/menus/menus.js" %}" type="text/javascript"></script>        
{% endblock %}
{% block body_class %}skin-black{% endblock %}
{% block content %}
<!-- Main row -->
<div class="form-group has-success">
    <label class="control-label"><i class="fa fa-check"></i></label>
</div>
{% for menu in menus %}

<div class="row">
    <!-- Left col -->
    <section class="col-sm-12">
        <!-- TO DO List -->
        <div class="box box-primary">
            <div class="box-header">
                <i class="ion ion-clipboard"></i>
                <h3 class="box-title">{{menu.name}}</h3>
                <div class="box-tools pull-right">
                    <ul class="pagination pagination-sm inline">
                        <li>
                         <a data-toggle="modal" href="#menuModal" class="btn btn-xs btn-default"><i class="fa fa-list-ul fa-fw"></i>Add Menu item</a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-fw fa-print"></i> Print preview</a>
                        </li>
                        <li data-toggle="tooltip" title="cat" data-original-title="monkey">
                            <a href="#"><i class="fa  fa-fw fa-download"></i> Generate PDF</a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-fw fa-code"></i> Use on my website</a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
                {% for section in menu.get_menu_sections %}
                <div>
                <div class="clearfix section_head">
                    <h3>
                        <span class="handle">
                            <i class="fa fa-ellipsis-v"></i>
                            <i class="fa fa-ellipsis-v"></i>
                        </span>
                        <a href="#" id="item" class="editable" data-type="text" data-pk="1" data-url="/post" data-title="Edit item">{{section.name}}</a>
                    </h3>
                    <div class="pull-right" id="sectionDish">
                        <a data-toggle="modal" data-menu-id = {{ menu.id }} href="#sectionModal" class="btn btn-xs btn-default add-section"><i class="fa fa-list-ul fa-fw"></i>Add Section</a>

                        <!-- Add dish -->

                        <a data-toggle="modal" href="#dishModal" data-lookup-url = {% url 'menu_dish_lookup_name' %} data-menu-section-id ={{ section.id }} class="btn btn-xs btn-default add-dish" data-type="text" data-pk="1" data-url="{% url 'menu_create_dish' %}" >
                            <i class="fa fa-list-ul fa-fw"></i>Add Dish
                        </a>
                        <!--<a href="#" id="item" data-lookup-url = {% url 'menu_dish_lookup_name' %} data-menu-section={{ section.id }} class="editable btn btn-xs btn-default add-dish" data-type="text" data-pk="1" data-url="{% url 'menu_create_dish' %}" data-title="Edit item">
                            <i class="fa fa-list-ul fa-fw"></i>Add Dish
                        </a>-->
                    </div>
                </div>
                <p id="item" class="editable" data-type="textarea" data-pk="1" data-url="/post" data-title="Edit item">Choose from our amazing selection of super delicious, locally sourced, fresh, season menu during lunch hours. </p>



            <!--    <ul class="example-ol">
              <li>
                First
                <ul></ul>
              </li>
              <li>
                Second
                <ul><li class="">First</li></ul>
              </li>
              <li>
                Third
                <ul>

                  <li class="">First</li><li>Second</li>
                  <li>
                    Third
                    <ul>

                      <li>Second</li>
                    </ul>
                    <ul>
                      <li>First</li>
                      <li>Second</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>Fourth</li>
              <li>Fifth</li>
              <li>Sixth</li>
            </ul>
-->




                <ul class="my-tree">
                    {% for dish in section.get_section_dishes %}
                    <li>
                        <span class="handle">
                            <i class="fa fa-ellipsis-v"></i>
                            <i class="fa fa-ellipsis-v"></i>
                        </span>
                        <a href="#" id="item" class="editable" data-type="text" data-pk="1" data-url="/post" data-title="Edit item">{{ dish.name }}</a> &pound;{{ dish.price }}

                        <!--
                        <div class="pull-right">
                            <span class="meat flagged" data-toggle="tooltip" title="Chicken">M</span>
                        </div>-->

                        <div class="tools" style="position: absolute; right:0;">
                            <a data-toggle="modal" href="#ingredientsModal" data-dish-id = {{ dish.id }} class="btn btn-xs btn-default add-ingredients"><i class="fa fa-cutlery fa-fw"></i>  Add ingredient</a>
                            <a class="btn btn-xs btn-default"><i class="fa fa-trash-o fa-fw"></i> Delete</a>
                        </div>
                        <p href="#" id="item" class="editable" data-type="textarea" data-pk="1" data-url="/post" data-title="Edit item">The vegetarian platter is great to share, and one of our most consistently popular items. It's super, stuff, seasonally adapted, and all 100% locally fresh!</p>

                        {% for children in dish.get_ingredient_tree %}
                        <ul>
                            <li>
                                <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                                </span>

                                <a href="#" id="item" class="editable" data-type="text" data-pk="1" data-url="/post" data-title="Edit item">Grilled Halloumi</a>

                                <div class="pull-right">
                                    <span class="allergen flagged" data-toggle="tooltip" title="tss" data-original-title="Milk">A</span>
                                </div>

                                <div class="tools">
                                    <i class="fa fa-cutlery"></i>

                                    <i class="fa fa-trash-o"></i>
                                </div>
                            </li>
                        </ul>
                        {% endfor %}

                    </li>

                    {% endfor %}




                    <!--<li>
                        <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                            </span>

                        <a href="#" id="item" class="editable" data-type="text" data-pk="1" data-url="/post" data-title="Edit item">Vegetarian Platter</a> &pound;12.5

                        <div class="pull-right">
                            <span class="allergen flagged" data-toggle="tooltip" title="tss" data-original-title="Milk">A</span>
                            <span class="meat flagged" data-toggle="tooltip" title="Chicken">M</span>
                        </div>
                        <div class="tools" style="position: absolute; right:0;">
                            <a class="btn btn-xs btn-default"><i class="fa fa-cutlery fa-fw"></i>  Add ingredient</a>
                            <a class="btn btn-xs btn-default"><i class="fa fa-trash-o fa-fw"></i> Delete</a>
                        </div>

                        <p href="#" id="item" class="editable" data-type="textarea" data-pk="1" data-url="/post" data-title="Edit item">The vegetarian platter is great to share, and one of our most consistently popular items. It's super, stuff, seasonally adapted, and all 100% locally fresh!</p>


                        <ul>
                            <li>
                                <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                                </span>

                                <a href="#" id="item" class="editable" data-type="text" data-pk="1" data-url="/post" data-title="Edit item">Grilled Halloumi</a>

                                <div class="pull-right">
                                    <span class="allergen flagged" data-toggle="tooltip" title="tss" data-original-title="Milk">A</span>
                                </div>

                                <div class="tools">
                                    <i class="fa fa-cutlery"></i>

                                    <i class="fa fa-trash-o"></i>
                                </div>
                            </li>

                            <li>
                                <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                                </span>

                                <a href="#" id="item" class="editable" data-type="text" data-pk="1" data-url="/post" data-title="Edit item">Spiced cous-cous</a>

                                <div class="pull-right">
                                    <span class="allergen flagged" data-toggle="tooltip" title="tss" data-original-title="Milk">A</span>
                                    <span class="gluten flagged" data-toggle="tooltip" title="Gluten">G</span>
                                </div>

                                <div class="tools">
                                    <i class="fa fa-cutlery"></i>

                                    <i class="fa fa-trash-o"></i>
                                </div>

                                <ul>
                                    <li>
                                        <span class="handle">
                                        <i class="fa fa-ellipsis-v"></i>
                                        <i class="fa fa-ellipsis-v"></i>
                                        </span>

                                        <a href="#" id="item" class="editable" data-type="text" data-pk="1" data-url="/post" data-title="Edit item">Paprika</a>

                                        <div class="tools">
                                            <i class="fa fa-cutlery"></i>

                                            <i class="fa fa-trash-o"></i>
                                        </div>
                                    </li>
                                    <li>
                                        <span class="handle">
                                        <i class="fa fa-ellipsis-v"></i>
                                        <i class="fa fa-ellipsis-v"></i>
                                        </span>

                                        <a href="#" id="item" class="editable" data-type="text" data-pk="1" data-url="/post" data-title="Edit item">Wheat cous-cous</a>
                                        <span class="small"><em>Wheat</em></span>

                                        <div class="pull-right">
                                            <span class="allergen flagged" data-toggle="tooltip" title="tss" data-original-title="Milk">A</span>
                                            <span class="gluten flagged" data-toggle="tooltip" title="Gluten">G</span>
                                        </div>

                                        <div class="tools">
                                            <i class="fa fa-cutlery"></i>

                                            <i class="fa fa-trash-o"></i>
                                        </div>
                                    </li>
                                    <li>
                                        <span class="handle">
                                        <i class="fa fa-ellipsis-v"></i>
                                        <i class="fa fa-ellipsis-v"></i>
                                        </span>

                                        <a href="#" id="item" class="editable" data-type="text" data-pk="1" data-url="/post" data-title="Edit item">All-spice</a>

                                        <div class="pull-right">
                                            <span class="allergen flagged" data-toggle="tooltip" title="tss" data-original-title="Milk">A</span>
                                        </div>

                                        <div class="tools">
                                            <i class="fa fa-cutlery"></i>

                                            <i class="fa fa-trash-o"></i>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                                </span>

                                <a href="#" id="item" class="editable" data-type="text" data-pk="1" data-url="/post" data-title="Edit item">Falafels</a>

                                <div class="pull-right">
                                    <span class="allergen flagged" data-toggle="tooltip" title="tss" data-original-title="Milk">A</span>
                                    <span class="gluten flagged" data-toggle="tooltip" title="Gluten">G</span>
                                </div>

                                <div class="tools">
                                    <i class="fa fa-cutlery"></i>

                                    <i class="fa fa-trash-o"></i>
                                </div>
                            </li>
                            <li>
                                <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                                </span>

                                <a href="#" id="item" class="editable" data-type="text" data-pk="1" data-url="/post" data-title="Edit item">Marinated Feta</a>

                                <div class="pull-right">
                                    <span class="allergen flagged" data-toggle="tooltip" title="tss" data-original-title="Milk">A</span>
                                </div>

                                <div class="tools">
                                    <i class="fa fa-cutlery"></i>

                                    <i class="fa fa-trash-o"></i>
                                </div>
                            </li>
                            <li>
                                <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                                </span>

                                <a href="#" id="item" class="editable" data-type="text" data-pk="1" data-url="/post" data-title="Edit item">Olives</a>

                                <div class="pull-right">
                                </div>

                                <div class="tools">
                                    <i class="fa fa-cutlery"></i>

                                    <i class="fa fa-trash-o"></i>
                                </div>
                            </li>
                            <li>
                                <span class="handle">
                                <i class="fa fa-ellipsis-v"></i>
                                <i class="fa fa-ellipsis-v"></i>
                                </span>

                                <a href="#" id="item" class="editable" data-type="text" data-pk="1" data-url="/post" data-title="Edit item">Salsa</a>

                                <div class="pull-right">
                                    <span class="allergen flagged" data-toggle="tooltip" title="tss" data-original-title="Milk">A</span>
                                </div>

                                <div class="tools">
                                    <i class="fa fa-cutlery"></i>

                                    <i class="fa fa-trash-o"></i>
                                </div>
                            </li>

                        </ul>
                    </li>-->

                </ul>
                </div>
                {% endfor %}
                </div>
            <!-- /.box-body -->
            <div class="box-footer clearfix no-border">
                <button data-toggle="modal" data-menu-id = {{ menu.id }} href="#sectionModal" class="btn btn-default add-section"><i class="fa fa-th fa-fw"></i> Add Section</button>
                <button data-toggle="modal" href="#menuModal" class="btn btn-default"><i class="fa fa-list-ul fa-fw"></i> Add Menu item</button>
            </div>
        </div>
        <!-- /.box -->
    </section>
    <!-- /.Left col -->
</div>

{% endfor %}
{% include 'menu/partials/_add_dish_modal.html' %}
{% include 'menu/partials/_add_section_modal.html' %}
{% include 'menu/partials/_add_menu_modal.html' %}
{% include 'menu/partials/_add_ingredients_modal.html' %}
{% endblock %}
