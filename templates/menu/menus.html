{% extends 'menu_base.html' %}
{% load django_static %}
{% load staticfiles %}
{% load socialaccount %}
{% load url from future %}
{% load i18n %}
{% load account %}


{% block extra_style %}

<link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
<link href="{% staticfile "/css/connection.css" %}" rel="stylesheet" type="text/css" />
<link href="{% staticfile '/x-editable/dist/bootstrap3-editable/css/bootstrap-editable.css' %}" rel="stylesheet" type="text/css" />

<style>
    body.dragging, body.dragging * {
        cursor: move !important;
      }

.dragged {
  position: absolute;
  opacity: 0.5;
  z-index: 2000;
}

ul.todo-list li.placeholder {
  position: relative;
  /** More li styles **/
}
ul.todo-list li.placeholder:before {
  position: absolute;
  /** Define arrowhead **/
}


    .ui-autocomplete .ui-menu-item a
{
    min-height: 15px;
}
    .ui-autocomplete {
        z-index: 100;
        }


</style>

{% endblock %}

{% block extra_js %}
    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.1";
      analytics.load("FVQBpRqubj7q6USVKrGrPeLG08SmADaC");
      analytics.page()
      }}();
    </script>
    <script src="{% staticfile '/typeahead.js/dist/typeahead.bundle.min.js' %}"></script>
    <script src="{% staticfile '/jquery-sortable/source/js/jquery-sortable-min.js' %}" type="text/javascript"></script>
    <script src="{% staticfile '/x-editable/dist/bootstrap3-editable/js/bootstrap-editable.min.js' %}" type="text/javascript"></script>
    <script src="{% staticfile '/x-editable/dist/inputs-ext/typeaheadjs/typeaheadjs.js' %}" type="text/javascript"></script>
    <script src="{% staticfile '/js/menu.js' %}" type="text/javascript"></script>
    <script src="{% staticfile '/js/menu.payment.js' %}" type="text/javascript"></script>
    <script type="text/javascript" src="https://js.stripe.com/v2/"></script>
    <script src="{% staticfile '/jquery-validation/dist/jquery.validate.min.js' %}" type="text/javascript"></script>
    <script src="{% staticfile '/jquery-validation/dist/additional-methods.min.js' %}" type="text/javascript"></script>
    <script>
        var establishmentLookupNameUrl = '{% url "menu_establishment_lookup_name" %}';
        var createMenuUrl = '{% url "menu_create_menu" %}';
        var deletMenuUrl= '{% url "menu_delete_menu" %}';
        var createSectionUrl = "{% url 'menu_create_menu_section' %}";
        var deleteSectionUrl = "{% url 'menu_delete_menu_section' %}";
        var dishLookupNameUrl = "{% url 'menu_dish_lookup_name' %}";
        var createDishUrl = "{% url 'menu_create_dish' %}";
        var updateDishUrl = "{% url 'menu_update_dish' %}";
        var deleteDishUrl = "{% url 'menu_delete_dish' %}";
        var createIngredientUrl = "{% url 'menu_create_ingredient' %}";
        var updateIngredientUrl = "{% url 'menu_update_ingredient' %}";
        var deleteIngredientUrl = "{% url 'menu_delete_ingredient' %}";
        var ingredientLookupNameUrl = "{% url 'menu_ingredient_lookup_name' %}";
        var updateIngredientNameUrl = "{% url 'menu_update_ingredient_name' %}";
        var saveModerationIngredientUrl = "{% url 'menu_save_moderation_ingredient' %}";
        var updateModerationIngredientUrl = "{% url 'menu_update_moderation_ingredient' %}";
        var stripePublicKey = '{{settings.STRIPE_PUBLIC_KEY}}';
        var stripePlan = '{{settings.FTM_STRIPE_PLAN_DEFAULT}}';
        Stripe.setPublishableKey(stripePublicKey);
        {% if has_payment %}
          var hasPayment = true;
        {% else %}
          var hasPayment = false;
        {% endif %}
    </script>
{% endblock %}
{% block body_class %}skin-black{% endblock %}
{% block content %}
<!-- Main row -->

<div class="menus">
    {% include 'includes/_menu.html' %}
</div>
{% include 'menu/partials/_add_dish_modal.html' %}
{% include 'menu/partials/_edit_dish_modal.html' %}
{% include 'menu/partials/_add_section_modal.html' %}
{% include 'menu/partials/_edit_section_modal.html' %}
{% include 'menu/partials/_add_menu_modal.html' %}
{% include 'menu/partials/_edit_menu_modal.html' %}
{% include 'menu/partials/_add_ingredients_modal.html' %}
{% include 'menu/partials/_add_ingredients_empty.html' %}

<div class="modal fade" id="confirmationModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title text-danger" id="myModalLabel"><i class="fa fa-trash-o"></i> Confirm delete</h4>
      </div>
      <div class="modal-body">
        Are you sure?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
        <button type="submit" class="btn btn-danger delete-confirm-btn" data-dismiss="modal"><i class="fa fa-trash-o"></i> Yes, delete it</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="paymentModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title text-danger" id="myModalLabel"><i class="fa fa-gbp"></i> Make Payment <img class="pull-right" src="http://i76.imgup.net/accepted_c22e0.png"></h4>
      </div>
      <div class="modal-body">
        <form role="form" id="payment-form" novalidate="novalidate">
            <div class="row">
                <div class="col-xs-12">
                    <div class="form-group">
                        <label for="cardNumber">CARD NUMBER</label>
                        <div class="input-group">
                            <input type="text" class="form-control success" name="cardNumber" placeholder="Valid Card Number" required="" autofocus="" data-stripe="number" aria-required="true" aria-invalid="false">
                            <span class="input-group-addon"><i class="fa fa-credit-card"></i></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-7 col-md-7">
                    <div class="form-group">
                        <label for="expMonth">EXPIRATION DATE</label>
                        <div class="col-xs-6 col-lg-6 pl-ziro">
                            <input type="text" class="form-control" name="expMonth" placeholder="MM" required="" data-stripe="exp_month" aria-required="true">
                        </div>
                        <div class="col-xs-6 col-lg-6 pl-ziro">
                            <input type="text" class="form-control" name="expYear" placeholder="YY" required="" data-stripe="exp_year" aria-required="true">
                        </div>
                    </div>
                </div>
                <div class="col-xs-5 col-md-5 pull-right">
                    <div class="form-group">
                        <label for="cvCode">CV CODE</label>
                        <input type="password" class="form-control" name="cvCode" placeholder="CV" required="" data-stripe="cvc" aria-required="true">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="form-group">
                        <label for="couponCode">COUPON CODE</label>
                        <input type="text" class="form-control" name="couponCode">
                    </div>
                </div>
            </div>
            <div class="row" style="display:none;">
                <div class="col-xs-12">
                    <p class="payment-errors"></p>
                </div>
            </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn" data-dismiss="modal">No</button>
        <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-gbp"></i> Start Subscription</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}
